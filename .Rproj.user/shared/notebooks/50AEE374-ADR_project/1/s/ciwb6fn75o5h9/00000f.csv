"0","set.seed(666)"
"0","data_heterosk <- simulate_data(n=1000, heterosk=TRUE)"
"0","fits_heterosk <- lapply(seq(0.05, 0.95, 0.05), function(tau) rq(y ~ x1, tau = tau, data = data_heterosk))"
"0","slopes_heterosk <- sapply(fits_heterosk, function(fit) coef(fit)[2])"
"0","ols_slope <- coef(lm(y ~ x1, data = data_heterosk))[2]"
"0",""
"0","plot_df <- tibble("
"0","  tau = seq(0.05, 0.95, 0.05),"
"0","  slope = slopes_heterosk"
"0",")"
"0",""
"0","ggplot(plot_df, aes(x = tau, y = slope)) +"
"0","  geom_line(color = ""blue"") +"
"0","  geom_point(color = ""blue"") +"
"0","  geom_hline(yintercept = ols_slope, color = ""red"", linetype = ""dashed"") +"
"0","  labs(x = ""Quantile (tau)"", y = ""Slope"", title = ""Slope vs Quantile Level"") +"
"0","  theme_minimal()"
